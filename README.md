# XISM: eXplanatory-Interactive Semantic Map ![Static Badge](https://img.shields.io/badge/Apache-2.0-green) ![Static Badge](https://img.shields.io/badge/NewBie-NLP-blue)  
![project_logo](./images/example_display.png)  

XISM is a web-based semantic map generation tool that allows users to upload Excel files (form-function correspondence tables) to generate interactive semantic maps, supporting real-time editing and exporting images.  

<h4 align="center">
    <p>
        <a href="#-prerequisites">ü§ñ Prerequisites</a> |
        <a href="#-installation-steps">üì¶ Installation</a> |
        <a href="#-run-the-system">üöÄ run</a> |
        <a href="#-user-guide">ü™Ñ guide</a> 
    <p>
</h4> 

## ü§ñ Prerequisites

Before getting started, make sure your system has:

- **Python 3.10+**
- **pip** (Python package manager)
- **Git**

## üì¶ Installation Steps

### 1. Clone the Repository
```bash
git clone https://github.com/hank317/XISM.git
cd XISM
```

### 2. Install Dependencies
```bash
pip install -r requirements.txt
```

## üöÄ Run the system
First, you need to specify the port number on which the entire service will run. By default, it is set to 5086, and you can modify the port in the utils.py file:
```python
port = your_local_port
``` 
Run the app.py file just like you would run any other Python script:
```bash
python app.py
``` 


## ü™Ñ User Guide  

### üìÅ Upload Excel File  

In the **Upload Excel File** module, click the **Choose File** button to upload the corresponding Excel file. Then click the **Upload and Generate Graph** button on the right to complete the file upload.  

#### 1Ô∏è‚É£ Excel Format Requirements  

If the Excel format does not meet the requirements, parsing may fail. Please ensure the file follows the specified format!  
You can click the **Download Guide** button in the lower right corner to download a sample template.  

##### 2Ô∏è‚É£ Data Sheet  

The data sheet must be placed in the first sheet of the Excel file for automated semantic map generation:  

- The first two columns of the data sheet must be named **languages** and **forms**. The **languages** column may be left blank, but the **forms** column must be filled.  
- The table must include at least two concepts (i.e., semantic units).  
- The table must include at least one form.  
- Only mark positions with **1**; all other positions default to **0**.  

##### 3Ô∏è‚É£ Ground Truth (Optional)  

The ground truth sheet should be placed in the second sheet of the Excel file to evaluate the generated semantic map against manual annotations:  

- The column and row names of the ground truth sheet must be identical and match the order of concepts in the data sheet.  
- Only mark positions with **1**; all other positions default to **0**.  

#### 4Ô∏è‚É£ Examples  

We provide three examples that users can directly use. Click the **ex** button to automatically generate the corresponding semantic map.  

- **ex.1**: "Eat" category words (Deng Shasha. A Study on the Semantic Map of "Eat" Category Words in Chinese Dialects[D]. Sichuan: Sichuan Normal University, 2020.)  
- **ex.2**: Adverbs of repetition (Guo Rui 2010, Supplementary Meanings of Adverbs and Semantic Maps of Related Meanings, International Symposium on Comparative and Typological Studies of Chinese Languages, Hong Kong University of Science and Technology.)  
- **ex.3**: Ditransitive constructions (Guo Rui 2013, Ditransitive Constructions in Chinese from the Perspective of Semantic Maps, 21st Annual Conference of the International Association of Chinese Linguistics, Taiwan Normal University.)  
- **Download Guide**: Download an Excel template example.  

### üñºÔ∏è Graph Demonstration  

The middle area displays multiple graphs. The first graph is a fully connected graph where all nodes are linked, with edge weights indicating the co-occurrence frequency of semantic functions. The subsequent graphs show five candidate graphs generated by the algorithm. Each graph includes an evaluation below.  

### ü™Ñ Graph Controls  

The **Graph Controls** module provides several functional buttons for interactive operations:  

#### 1Ô∏è‚É£ Edge Operations  

- **Add Edge**: Click this button, select two semantic nodes from the dropdown, and specify a weight to add a new edge.  
- **Edit Edge**: Click an edge on the map, then click this button to set a new weight and edit the edge.  
- **Delete Edge**: Click an edge on the map, then click this button to delete the edge.  
- **Merge Edge**: Click this button to automatically add edges from the bottom up, ensuring full-form connectivity and increasing the coverage of connected forms to 1.  

#### 2Ô∏è‚É£ Beautification Operations  

- **Center**: Click this button to center the semantic map on the canvas for a better overview.  
- **Beautify**: Click this button to re-render the semantic map with a more flexible custom layout.  

#### 3Ô∏è‚É£ Map Download  

- **Download Image**: Click this button to export the current semantic map as a high-definition PNG image.  

#### 4Ô∏è‚É£ Form Filtering  

- Click this button and select a form from the dropdown to highlight the corresponding semantic nodes in the map, allowing users to observe connectivity.  

### üìä Evaluation Metrics  

Map evaluation includes the following eight metrics:  

- **Weight Sum**: The sum of edge weights.  
- **Degree Mean**: The average degree of nodes in the graph.  
- **Degree Std**: The standard deviation of node degrees. 
- **Coverage**: The coverage of connected forms among all existing forms.  
- **Productivity**: The proportion of actual forms among all possible forms. 
- **Accuracy**: The degree of alignment with expert annotations.  
- **Precision**: The proportion of predicted edges that match the ground truth.
- **Recall**: The proportion of ground truth edges that are correctly predicted.
- **F1 Score**: The geometric mean of Precision and Recall. 
- **Unconnected Forms**: Forms in the current graph that are not connected, helping users adjust the graph.   
 

### üì© Image Save  

After adjusting the graph, users can save it. Click the **Download Image** button to download the current semantic map.